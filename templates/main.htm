{% set btn_my_texts = "active" %}
{% extends "base.htm" %}

{% block script %}

    <script type="text/javascript">
    
        var msg_box = null;
		var text_id_to_delete = null;
        
        function msgClose(toDelete){
		    if(toDelete) {
				$('.title-table #' + text_id_to_delete).remove();
				delete_text(text_id_to_delete);
			}
			text_id_to_delete = null;
		}

		$(document).ready(function() {		
                msg_box = $("body").messageBox({
                // autoclose timeout. 0 = disable autoclose
                autoClose : 0, 
                // show autoclose counter
                showAutoClose : true,       
                // enable modal mode   
                modal:true, 
                // path to the CSS
                css: 'static/styles/messageBox.min.css', 
                // called when message box is closed
                cbClose: msgClose,       
                // called when message box is ready          
                cbReady: false,       
                // localization         
                locale:{
                  NO : 'No',
                  YES : 'Yes',
                  CANCEL : 'Cancel',
                  OK : 'Okey',
                  textAutoClose: 'Auto close in %d seconds'
                }
            });
        
            $('.a_delete').click(function(){
                var title = $(this).attr("data-text-title");
				text_id_to_delete = $(this).attr("data-text-id")
                msg_box.data('messageBox').question(
                    'Text Deletion',
                     'Delete "' + title + '"?', // messageBox body
                    // the buttons to be displayed in the messageBox
                    // The return value will be passed to the callback function cbClose ()
                     [{text:'Yes',return:true}, {text:'No',return:false} ]
                );
            });
            $('.a_modify').click(function(){
            });			
        });
    </script>
{% endblock %}

{% block content %}
	{% if textdescs|length %}
        <table class="title-table">
            <thead>
                 <tr>
                     <th>Title</th>
                     <th>Total Words</th>
                     <th>Unique Words</th>
                     <th></th>
                 </tr>
            </thead>
            <tbody>
                 {% for textdesc in textdescs %}
                     <tr id="{{ textdesc.id  }}">
                         <td><a href="/showtext?id={{ textdesc.id }}">{{ textdesc.title }}</a></td>
                         <td>{{ textdesc.total_words }}</td>
                         <td>{{ textdesc.unique_words }}</td>
                         <td>
						    <a href="#" class="btn btn-outline-secondary btn-sm a_delete" data-text-id="{{ textdesc.id  }}" data-text-title="{{ textdesc.title }}" "><img src="static/images/Delete_small.png"></a>
						    <a href="/edittext?id={{ textdesc.id }}" class="btn btn-outline-secondary btn-sm a_modify" 
							    ><img src="static/images/Modify_small.png"></a>
						 </td>
                     </tr>
                 {% endfor %}
            </tbody>
        </table>
	{% else %}
	  <h2>No text added</h2>
	{% endif %}
{% endblock %}