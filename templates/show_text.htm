{# 
    Input parameters
    text_id: integer id of the current text
    theme: enum: light, dark or sepia

    from_page:
    to_page: from_page <= to_page
    current_page: from_page..to_page
    page_number: total of pages in the text
 #}

{% set btn_settings_visible = True %}
{% extends "base.htm" %}

{% block script %}

    <script type="text/javascript">
    
        const current_text_id = "{{ text_id }}";
        
        $(document).ready(function() {
            let theme_class = "theme-{{ theme }}";
            $("#main_panel")
               .css('font-size', {{ font_size }})
               .addClass(theme_class);
            let tokens = {{ tokens|safe }};
            annotate(tokens, theme_class);      
        });
    </script>

{% endblock %}
  
{% block content %}
    <div id="main_panel">
        <div class="container">
            <div class="col-md-auto">
                <div id="paginator" class="text-center py-2">
                    {% if from_page > 1  %}
                       <a href="/showtext?id={{ text_id }}&page={{ from_page }}"><<</a>
                    {% endif %}
                    {% if current_page > 1 %}
                       <a href="/showtext?id={{ text_id }}&page={{ current_page - 1}}"><</a>
                    {% endif %}

                    {% for page_num in range(from_page, to_page + 1) %}
                        {% if page_num != current_page %}
                            <a class="mx-1" href="/showtext?id={{ text_id }}&page={{ page_num}}">{{ page_num }}</a>
                        {% else %}
                            <span class="mx-1">{{ page_num }}</span>
                        {% endif %}
                    {% endfor %}

                    {% if current_page  < page_number %}
                       <a href="/showtext?id={{ text_id }}&page={{ current_page + 1}}">></a>
                    {% endif %}
                    {% if to_page + 1 < page_number %}
                       <a href="/showtext?id={{ text_id }}&page={{ to_page }}">>></a>
                    {% endif %}
                </div>
                <h2 class="text-center p-2">{{ title }}</h2>
                <div class="text-body pb-3"> </div>
            </div>
        </div>
    </div>
{% endblock %}